<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveGeneric #-}</span><span>
</span><span id="line-2"></span><span class="hs-pragma">{-# LANGUAGE OverloadedStrings #-}</span><span>
</span><span id="line-3"></span><span class="hs-pragma">{-# LANGUAGE ScopedTypeVariables #-}</span><span>
</span><span id="line-4"></span><span class="hs-pragma">{-# LANGUAGE TypeApplications #-}</span><span>
</span><span id="line-5"></span><span>
</span><span id="line-6"></span><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Hedgehog.Extras.Test.Process</span><span> </span><span class="hs-special">(</span><span>
</span><span id="line-7"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#createProcess"><span class="hs-identifier">createProcess</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-8"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#exec"><span class="hs-identifier">exec</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-9"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execAny"><span class="hs-identifier">execAny</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-10"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#exec_"><span class="hs-identifier">exec_</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-11"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execFlex"><span class="hs-identifier">execFlex</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-12"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execFlex%27"><span class="hs-identifier">execFlex'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-13"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execFlexAny%27"><span class="hs-identifier">execFlexAny'</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-14"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#procFlex"><span class="hs-identifier">procFlex</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-15"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#binFlex"><span class="hs-identifier">binFlex</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-16"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#getProjectBase"><span class="hs-identifier">getProjectBase</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-17"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#waitForProcess"><span class="hs-identifier">waitForProcess</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-18"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#maybeWaitForProcess"><span class="hs-identifier">maybeWaitForProcess</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-19"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#getPid"><span class="hs-identifier">getPid</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-20"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#getPidOk"><span class="hs-identifier">getPidOk</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-21"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#waitSecondsForProcess"><span class="hs-identifier">waitSecondsForProcess</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-22"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier">ExecConfig</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><span id="line-23"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#defaultExecConfig"><span class="hs-identifier">defaultExecConfig</span></a></span><span class="hs-special">,</span><span>
</span><span id="line-24"></span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><span id="line-25"></span><span>
</span><span id="line-26"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Monad</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">MonadFail</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">fail</span></span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">void</span></span><span class="hs-special">)</span><span>
</span><span id="line-27"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.Catch</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadCatch</span></span><span class="hs-special">)</span><span>
</span><span id="line-28"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Control.Monad.IO.Class</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">MonadIO</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">liftIO</span></span><span class="hs-special">)</span><span>
</span><span id="line-29"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.html"><span class="hs-identifier">Control.Monad.Trans.Resource</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.Internal.html#MonadResource"><span class="hs-identifier">MonadResource</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.Internal.html#ReleaseKey"><span class="hs-identifier">ReleaseKey</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.html#register"><span class="hs-identifier">register</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-30"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Bool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Bool</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">True</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-31"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Either</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Either</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-32"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Eq</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Eq</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-33"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Function</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">($)</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(.)</span></span><span class="hs-special">)</span><span>
</span><span id="line-34"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Functor</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;$&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-35"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Int</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Int</span></span><span class="hs-special">)</span><span>
</span><span id="line-36"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Maybe</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Maybe</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-37"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.Monoid</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Last</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">mempty</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-operator">(&lt;&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-38"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Data.String</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">String</span></span><span class="hs-special">)</span><span>
</span><span id="line-39"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Generics</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Generic</span></span><span class="hs-special">)</span><span>
</span><span id="line-40"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">HasCallStack</span></span><span class="hs-special">)</span><span>
</span><span id="line-41"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.html"><span class="hs-identifier">Hedgehog</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier">MonadTest</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-42"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hedgehog.Extras.Internal.Cli.html"><span class="hs-identifier">Hedgehog.Extras.Internal.Cli</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hedgehog.Extras.Internal.Cli.html#argQuote"><span class="hs-identifier">argQuote</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-43"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hedgehog.Extras.Internal.Process.html"><span class="hs-identifier">Hedgehog.Extras.Internal.Process</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">Internal</span></span><span>
</span><span id="line-44"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><a href="Hedgehog.Extras.Stock.IO.Process.html"><span class="hs-identifier">Hedgehog.Extras.Stock.IO.Process</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><a href="Hedgehog.Extras.Stock.IO.Process.html#TimedOut"><span class="hs-identifier">TimedOut</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-45"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Exit</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">ExitCode</span></span><span class="hs-special">)</span><span>
</span><span id="line-46"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.FilePath.Posix</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(&lt;/&gt;)</span></span><span class="hs-special">)</span><span>
</span><span id="line-47"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.IO</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">FilePath</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Handle</span></span><span class="hs-special">)</span><span>
</span><span id="line-48"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">System.Process</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">CmdSpec</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">CreateProcess</span></span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">Pid</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier">ProcessHandle</span></span><span class="hs-special">)</span><span>
</span><span id="line-49"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Text.Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">Show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier">show</span></span><span class="hs-special">)</span><span class="hs-special">)</span><span>
</span><span id="line-50"></span><span class="hs-keyword">import</span><span> </span><span class="annot"><span class="hs-identifier">Prelude</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-operator">(++)</span></span><span class="hs-special">)</span><span>
</span><span id="line-51"></span><span>
</span><span id="line-52"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">Data.List</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">L</span></span><span>
</span><span id="line-53"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">GHC.Stack</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">GHC</span></span><span>
</span><span id="line-54"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.html"><span class="hs-identifier">Hedgehog</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-55"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hedgehog.Extras.Stock.IO.Process.html"><span class="hs-identifier">Hedgehog.Extras.Stock.IO.Process</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-56"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><a href="Hedgehog.Extras.Test.Base.html"><span class="hs-identifier">Hedgehog.Extras.Test.Base</span></a></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">H</span></span><span>
</span><span id="line-57"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Directory</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-58"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Environment</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-59"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Exit</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-60"></span><span class="hs-keyword">import</span><span> </span><span class="hs-keyword">qualified</span><span> </span><span class="annot"><span class="hs-identifier">System.Process</span></span><span> </span><span class="hs-keyword">as</span><span> </span><span class="annot"><span class="hs-identifier">IO</span></span><span>
</span><span id="line-61"></span><span>
</span><span id="line-62"></span><span class="annot"><span class="hs-comment">-- | Configuration for starting a new process.  This is a subset of 'IO.CreateProcess'.</span></span><span>
</span><span id="line-63"></span><span class="hs-keyword">data</span><span> </span><span id="ExecConfig"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-var">ExecConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span id="ExecConfig"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-var">ExecConfig</span></a></span></span><span>
</span><span id="line-64"></span><span>    </span><span class="hs-special">{</span><span> </span><span id="execConfigEnv"><span class="annot"><span class="annottext">ExecConfig -&gt; Last [(String, String)]
</span><a href="Hedgehog.Extras.Test.Process.html#execConfigEnv"><span class="hs-identifier hs-var hs-var">execConfigEnv</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Last</span></span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><span id="line-65"></span><span>    </span><span class="hs-special">,</span><span> </span><span id="execConfigCwd"><span class="annot"><span class="annottext">ExecConfig -&gt; Last String
</span><a href="Hedgehog.Extras.Test.Process.html#execConfigCwd"><span class="hs-identifier hs-var hs-var">execConfigCwd</span></a></span></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Last</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span><span>
</span><span id="line-66"></span><span>    </span><span class="hs-special">}</span><span>
</span><span id="line-67"></span><span>    </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span id="local-6989586621679159998"><span id="local-6989586621679160005"><span class="annot"><span class="annottext">ExecConfig -&gt; ExecConfig -&gt; Bool
(ExecConfig -&gt; ExecConfig -&gt; Bool)
-&gt; (ExecConfig -&gt; ExecConfig -&gt; Bool) -&gt; Eq ExecConfig
forall a. (a -&gt; a -&gt; Bool) -&gt; (a -&gt; a -&gt; Bool) -&gt; Eq a
$c== :: ExecConfig -&gt; ExecConfig -&gt; Bool
== :: ExecConfig -&gt; ExecConfig -&gt; Bool
$c/= :: ExecConfig -&gt; ExecConfig -&gt; Bool
/= :: ExecConfig -&gt; ExecConfig -&gt; Bool
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Eq</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160016"><span id="local-6989586621679160018"><span class="annot"><span class="annottext">(forall x. ExecConfig -&gt; Rep ExecConfig x)
-&gt; (forall x. Rep ExecConfig x -&gt; ExecConfig) -&gt; Generic ExecConfig
forall x. Rep ExecConfig x -&gt; ExecConfig
forall x. ExecConfig -&gt; Rep ExecConfig x
forall a.
(forall x. a -&gt; Rep a x) -&gt; (forall x. Rep a x -&gt; a) -&gt; Generic a
$cfrom :: forall x. ExecConfig -&gt; Rep ExecConfig x
from :: forall x. ExecConfig -&gt; Rep ExecConfig x
$cto :: forall x. Rep ExecConfig x -&gt; ExecConfig
to :: forall x. Rep ExecConfig x -&gt; ExecConfig
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var">Generic</span></span></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160022"><span id="local-6989586621679160031"><span id="local-6989586621679160035"><span class="annot"><span class="annottext">Int -&gt; ExecConfig -&gt; ShowS
[ExecConfig] -&gt; ShowS
ExecConfig -&gt; String
(Int -&gt; ExecConfig -&gt; ShowS)
-&gt; (ExecConfig -&gt; String)
-&gt; ([ExecConfig] -&gt; ShowS)
-&gt; Show ExecConfig
forall a.
(Int -&gt; a -&gt; ShowS) -&gt; (a -&gt; String) -&gt; ([a] -&gt; ShowS) -&gt; Show a
$cshowsPrec :: Int -&gt; ExecConfig -&gt; ShowS
showsPrec :: Int -&gt; ExecConfig -&gt; ShowS
$cshow :: ExecConfig -&gt; String
show :: ExecConfig -&gt; String
$cshowList :: [ExecConfig] -&gt; ShowS
showList :: [ExecConfig] -&gt; ShowS
</span><span class="hs-identifier hs-var hs-var hs-var hs-var hs-var hs-var hs-var hs-var">Show</span></span></span></span></span><span class="hs-special">)</span><span>
</span><span id="line-68"></span><span>
</span><span id="line-69"></span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#defaultExecConfig"><span class="hs-identifier hs-type">defaultExecConfig</span></a></span><span> </span><span class="hs-glyph">::</span><span> </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span>
</span><span id="line-70"></span><span id="defaultExecConfig"><span class="annot"><span class="annottext">defaultExecConfig :: ExecConfig
</span><a href="Hedgehog.Extras.Test.Process.html#defaultExecConfig"><span class="hs-identifier hs-var hs-var">defaultExecConfig</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-71"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span>
</span><span id="line-72"></span><span>        </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="annottext">execConfigEnv :: Last [(String, String)]
</span><a href="Hedgehog.Extras.Test.Process.html#execConfigEnv"><span class="hs-identifier hs-var">execConfigEnv</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Last [(String, String)]
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-73"></span><span>        </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">execConfigCwd :: Last String
</span><a href="Hedgehog.Extras.Test.Process.html#execConfigCwd"><span class="hs-identifier hs-var">execConfigCwd</span></a></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">Last String
forall a. Monoid a =&gt; a
</span><span class="hs-identifier hs-var">mempty</span></span><span>
</span><span id="line-74"></span><span>        </span><span class="hs-special">}</span><span>
</span><span id="line-75"></span><span>
</span><span id="line-76"></span><span class="annot"><span class="hs-comment">-- | Create a process returning handles to stdin, stdout, and stderr as well as the process handle.</span></span><span>
</span><span id="line-77"></span><span id="local-6989586621679159874"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#createProcess"><span class="hs-identifier hs-type">createProcess</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-78"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159874"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.Internal.html#MonadResource"><span class="hs-identifier hs-type">MonadResource</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159874"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-79"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">CreateProcess</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-80"></span><span>    </span><span class="annot"><a href="#local-6989586621679159874"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handle</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handle</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Handle</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">ProcessHandle</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.Internal.html#ReleaseKey"><span class="hs-identifier hs-type">ReleaseKey</span></a></span><span class="hs-special">)</span></span><span>
</span><span id="line-81"></span><span id="createProcess"><span class="annot"><span class="annottext">createProcess :: forall (m :: * -&gt; *).
(MonadTest m, MonadResource m, HasCallStack) =&gt;
CreateProcess
-&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
      ReleaseKey)
</span><a href="Hedgehog.Extras.Test.Process.html#createProcess"><span class="hs-identifier hs-var hs-var">createProcess</span></a></span></span><span> </span><span id="local-6989586621679160053"><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160053"><span class="hs-identifier hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HasCallStack =&gt;
 m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
    ReleaseKey))
-&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
      ReleaseKey)
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt;
  m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
     ReleaseKey))
 -&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
       ReleaseKey))
-&gt; (HasCallStack =&gt;
    m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
       ReleaseKey))
-&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
      ReleaseKey)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-82"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CWD: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">Maybe String -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">CreateProcess -&gt; Maybe String
</span><span class="hs-identifier hs-var">IO.cwd</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160053"><span class="hs-identifier hs-var">cp</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-83"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CreateProcess -&gt; CmdSpec
</span><span class="hs-identifier hs-var">IO.cmdspec</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160053"><span class="hs-identifier hs-var">cp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-84"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">RawCommand</span></span><span> </span><span id="local-6989586621679160095"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160095"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span id="local-6989586621679160096"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160096"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Command line: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160095"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">L.unwords</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160096"><span class="hs-identifier hs-var">args</span></a></span><span>
</span><span id="line-85"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">ShellCommand</span></span><span> </span><span id="local-6989586621679160099"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160099"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Command line: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160099"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-86"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679160100"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160100"><span class="hs-identifier hs-var">mhStdin</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160101"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160101"><span class="hs-identifier hs-var">mhStdout</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160102"><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160102"><span class="hs-identifier hs-var">mhStderr</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160103"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160103"><span class="hs-identifier hs-var">hProcess</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
-&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
 -&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle))
-&gt; IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
-&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
-&gt; IO (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle)
</span><span class="hs-identifier hs-var">IO.createProcess</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160053"><span class="hs-identifier hs-var">cp</span></a></span><span>
</span><span id="line-87"></span><span>    </span><span id="local-6989586621679160106"><span class="annot"><span class="annottext">ReleaseKey
</span><a href="#local-6989586621679160106"><span class="hs-identifier hs-var">releaseKey</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO () -&gt; m ReleaseKey
forall (m :: * -&gt; *). MonadResource m =&gt; IO () -&gt; m ReleaseKey
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/resourcet-1.3.0-9e3f9df79ea24a8f685ce1b9440d2f20583ec96410f544b6573f6b2a78dd67b4/share/doc/html/src/Control.Monad.Trans.Resource.html#register"><span class="hs-identifier hs-var">register</span></a></span><span> </span><span class="annot"><span class="annottext">(IO () -&gt; m ReleaseKey) -&gt; IO () -&gt; m ReleaseKey
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">(Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle) -&gt; IO ()
</span><span class="hs-identifier hs-var">IO.cleanupProcess</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160100"><span class="hs-identifier hs-var">mhStdin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160101"><span class="hs-identifier hs-var">mhStdout</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160102"><span class="hs-identifier hs-var">mhStderr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160103"><span class="hs-identifier hs-var">hProcess</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-88"></span><span>
</span><span id="line-89"></span><span>    </span><span class="annot"><span class="annottext">(Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
 ReleaseKey)
-&gt; m (Maybe Handle, Maybe Handle, Maybe Handle, ProcessHandle,
      ReleaseKey)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160100"><span class="hs-identifier hs-var">mhStdin</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160101"><span class="hs-identifier hs-var">mhStdout</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">Maybe Handle
</span><a href="#local-6989586621679160102"><span class="hs-identifier hs-var">mhStderr</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160103"><span class="hs-identifier hs-var">hProcess</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">ReleaseKey
</span><a href="#local-6989586621679160106"><span class="hs-identifier hs-var">releaseKey</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-90"></span><span>
</span><span id="line-91"></span><span class="annot"><span class="hs-comment">-- | Get the process ID.</span></span><span>
</span><span id="line-92"></span><span id="local-6989586621679159904"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#getPid"><span class="hs-identifier hs-type">getPid</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-93"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159904"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159904"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-94"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ProcessHandle</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-95"></span><span>    </span><span class="annot"><a href="#local-6989586621679159904"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pid</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-96"></span><span id="getPid"><span class="annot"><span class="annottext">getPid :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ProcessHandle -&gt; m (Maybe Pid)
</span><a href="Hedgehog.Extras.Test.Process.html#getPid"><span class="hs-identifier hs-var hs-var">getPid</span></a></span></span><span> </span><span id="local-6989586621679160117"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160117"><span class="hs-identifier hs-var">hProcess</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m (Maybe Pid) -&gt; m (Maybe Pid)
(HasCallStack =&gt; m (Maybe Pid)) -&gt; m (Maybe Pid)
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">(m (Maybe Pid) -&gt; m (Maybe Pid))
-&gt; (IO (Maybe Pid) -&gt; m (Maybe Pid))
-&gt; IO (Maybe Pid)
-&gt; m (Maybe Pid)
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">IO (Maybe Pid) -&gt; m (Maybe Pid)
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe Pid) -&gt; m (Maybe Pid))
-&gt; IO (Maybe Pid) -&gt; m (Maybe Pid)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ProcessHandle -&gt; IO (Maybe Pid)
</span><span class="hs-identifier hs-var">IO.getPid</span></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160117"><span class="hs-identifier hs-var">hProcess</span></a></span><span>
</span><span id="line-97"></span><span>
</span><span id="line-98"></span><span class="annot"><span class="hs-comment">-- | Get the process ID.</span></span><span>
</span><span id="line-99"></span><span id="local-6989586621679159910"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#getPidOk"><span class="hs-identifier hs-type">getPidOk</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-100"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159910"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159910"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-101"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ProcessHandle</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-102"></span><span>    </span><span class="annot"><a href="#local-6989586621679159910"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">Pid</span></span></span><span>
</span><span id="line-103"></span><span id="getPidOk"><span class="annot"><span class="annottext">getPidOk :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ProcessHandle -&gt; m Pid
</span><a href="Hedgehog.Extras.Test.Process.html#getPidOk"><span class="hs-identifier hs-var hs-var">getPidOk</span></a></span></span><span> </span><span id="local-6989586621679160125"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160125"><span class="hs-identifier hs-var">hProcess</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-104"></span><span>    </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m Pid) -&gt; m Pid
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m Pid) -&gt; m Pid)
-&gt; (HasCallStack =&gt; m Pid) -&gt; m Pid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-105"></span><span>        </span><span class="annot"><span class="annottext">m (Maybe Pid) -&gt; m Pid
forall (m :: * -&gt; *) a.
(MonadTest m, HasCallStack) =&gt;
m (Maybe a) -&gt; m a
</span><a href="Hedgehog.Extras.Test.Base.html#nothingFailM"><span class="hs-identifier hs-var">H.nothingFailM</span></a></span><span> </span><span class="annot"><span class="annottext">(m (Maybe Pid) -&gt; m Pid) -&gt; m (Maybe Pid) -&gt; m Pid
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-106"></span><span>            </span><span class="annot"><span class="annottext">ProcessHandle -&gt; m (Maybe Pid)
forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ProcessHandle -&gt; m (Maybe Pid)
</span><a href="Hedgehog.Extras.Test.Process.html#getPid"><span class="hs-identifier hs-var">getPid</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160125"><span class="hs-identifier hs-var">hProcess</span></a></span><span>
</span><span id="line-107"></span><span>
</span><span id="line-108"></span><span class="annot"><span class="hs-comment">{- | Create a process returning its stdout.

Being a 'flex' function means that the environment determines how the process is launched.

When running in a nix environment, the 'envBin' argument describes the environment variable
that defines the binary to use to launch the process.

When running outside a nix environment, the `pkgBin` describes the name of the binary
to launch via cabal exec.
-}</span></span><span>
</span><span id="line-118"></span><span id="local-6989586621679159914"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execFlex"><span class="hs-identifier hs-type">execFlex</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-119"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621679159914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159914"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-120"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-121"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-122"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-123"></span><span>    </span><span class="annot"><a href="#local-6989586621679159914"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-124"></span><span id="execFlex"><span class="annot"><span class="annottext">execFlex :: forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
String -&gt; String -&gt; [String] -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#execFlex"><span class="hs-identifier hs-var hs-var">execFlex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m String
forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#execFlex%27"><span class="hs-identifier hs-var">execFlex'</span></a></span><span> </span><span class="annot"><span class="annottext">ExecConfig
</span><a href="Hedgehog.Extras.Test.Process.html#defaultExecConfig"><span class="hs-identifier hs-var">defaultExecConfig</span></a></span><span>
</span><span id="line-125"></span><span>
</span><span id="line-126"></span><span id="local-6989586621679159917"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execFlex%27"><span class="hs-identifier hs-type">execFlex'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-127"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159917"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621679159917"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159917"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-128"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-129"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-130"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-131"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-132"></span><span>    </span><span class="annot"><a href="#local-6989586621679159917"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-133"></span><span id="execFlex%27"><span class="annot"><span class="annottext">execFlex' :: forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#execFlex%27"><span class="hs-identifier hs-var hs-var">execFlex'</span></a></span></span><span> </span><span id="local-6989586621679160151"><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160151"><span class="hs-identifier hs-var">execConfig</span></a></span></span><span> </span><span id="local-6989586621679160152"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160152"><span class="hs-identifier hs-var">pkgBin</span></a></span></span><span> </span><span id="local-6989586621679160153"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160153"><span class="hs-identifier hs-var">envBin</span></a></span></span><span> </span><span id="local-6989586621679160154"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160154"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m String) -&gt; m String
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m String) -&gt; m String)
-&gt; (HasCallStack =&gt; m String) -&gt; m String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-134"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679160179"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160179"><span class="hs-identifier hs-var">exitResult</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160180"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160180"><span class="hs-identifier hs-var">stdout</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160181"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160181"><span class="hs-identifier hs-var">stderr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExecConfig
-&gt; String -&gt; String -&gt; [String] -&gt; m (ExitCode, String, String)
forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig
-&gt; String -&gt; String -&gt; [String] -&gt; m (ExitCode, String, String)
</span><a href="Hedgehog.Extras.Test.Process.html#execFlexAny%27"><span class="hs-identifier hs-var">execFlexAny'</span></a></span><span> </span><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160151"><span class="hs-identifier hs-var">execConfig</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160152"><span class="hs-identifier hs-var">pkgBin</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160153"><span class="hs-identifier hs-var">envBin</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160154"><span class="hs-identifier hs-var">arguments</span></a></span><span>
</span><span id="line-135"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160179"><span class="hs-identifier hs-var">exitResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-136"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">IO.ExitFailure</span></span><span> </span><span id="local-6989586621679160183"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679160183"><span class="hs-identifier hs-var">exitCode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-137"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-138"></span><span>                </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">L.unlines</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; String) -&gt; [String] -&gt; String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-139"></span><span>                    </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Process exited with non-zero exit-code: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679160183"><span class="hs-identifier hs-var">exitCode</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-140"></span><span>                        </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">L.null</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160180"><span class="hs-identifier hs-var">stdout</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9473;&#9473;&#9473;&#9473; stdout &#9473;&#9473;&#9473;&#9473;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160180"><span class="hs-identifier hs-var">stdout</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-141"></span><span>                        </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">L.null</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160181"><span class="hs-identifier hs-var">stderr</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9473;&#9473;&#9473;&#9473; stderr &#9473;&#9473;&#9473;&#9473;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160181"><span class="hs-identifier hs-var">stderr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-142"></span><span>            </span><span class="annot"><span class="annottext">CallStack -&gt; String -&gt; m String
forall (m :: * -&gt; *) a. MonadTest m =&gt; CallStack -&gt; String -&gt; m a
</span><a href="Hedgehog.Extras.Test.Prim.html#failMessage"><span class="hs-identifier hs-var">H.failMessage</span></a></span><span> </span><span class="annot"><span class="annottext">CallStack
HasCallStack =&gt; CallStack
</span><span class="hs-identifier hs-var">GHC.callStack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Execute process failed&quot;</span></span><span>
</span><span id="line-143"></span><span>        </span><span class="annot"><span class="annottext">ExitCode
</span><span class="hs-identifier hs-var">IO.ExitSuccess</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160180"><span class="hs-identifier hs-var">stdout</span></a></span><span>
</span><span id="line-144"></span><span>
</span><span id="line-145"></span><span class="annot"><span class="hs-comment">{- | Run a process, returning its exit code, its stdout, and its stderr.
Contrary to @execFlex'@, this function doesn't fail if the call fails.
So, if you want to test something negative, this is the function to use.
-}</span></span><span>
</span><span id="line-149"></span><span id="local-6989586621679159920"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execFlexAny%27"><span class="hs-identifier hs-type">execFlexAny'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-150"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159920"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621679159920"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159920"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-151"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-152"></span><span>    </span><span class="annot"><span class="hs-comment">-- | @pkgBin@: name of the binary to launch via 'cabal exec'</span></span><span>
</span><span id="line-153"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-154"></span><span>    </span><span class="annot"><span class="hs-comment">-- | @envBin@: environment variable defining the binary to launch the process, when in Nix</span></span><span>
</span><span id="line-155"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-156"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-157"></span><span>    </span><span class="annot"><span class="hs-comment">-- | exit code, stdout, stderr</span></span><span>
</span><span id="line-158"></span><span>    </span><span class="annot"><a href="#local-6989586621679159920"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ExitCode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-159"></span><span id="execFlexAny%27"><span class="annot"><span class="annottext">execFlexAny' :: forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig
-&gt; String -&gt; String -&gt; [String] -&gt; m (ExitCode, String, String)
</span><a href="Hedgehog.Extras.Test.Process.html#execFlexAny%27"><span class="hs-identifier hs-var hs-var">execFlexAny'</span></a></span></span><span> </span><span id="local-6989586621679160196"><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160196"><span class="hs-identifier hs-var">execConfig</span></a></span></span><span> </span><span id="local-6989586621679160197"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160197"><span class="hs-identifier hs-var">pkgBin</span></a></span></span><span> </span><span id="local-6989586621679160198"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160198"><span class="hs-identifier hs-var">envBin</span></a></span></span><span> </span><span id="local-6989586621679160199"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160199"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m (ExitCode, String, String))
-&gt; m (ExitCode, String, String)
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m (ExitCode, String, String))
 -&gt; m (ExitCode, String, String))
-&gt; (HasCallStack =&gt; m (ExitCode, String, String))
-&gt; m (ExitCode, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-160"></span><span>    </span><span id="local-6989586621679160222"><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160222"><span class="hs-identifier hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m CreateProcess
forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m CreateProcess
</span><a href="Hedgehog.Extras.Test.Process.html#procFlex%27"><span class="hs-identifier hs-var">procFlex'</span></a></span><span> </span><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160196"><span class="hs-identifier hs-var">execConfig</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160197"><span class="hs-identifier hs-var">pkgBin</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160198"><span class="hs-identifier hs-var">envBin</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160199"><span class="hs-identifier hs-var">arguments</span></a></span><span>
</span><span id="line-161"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; ShowS -&gt; String -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9473;&#9473;&#9473;&#9473; command &#9473;&#9473;&#9473;&#9473;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">CreateProcess -&gt; CmdSpec
</span><span class="hs-identifier hs-var">IO.cmdspec</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160222"><span class="hs-identifier hs-var">cp</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-162"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">IO.ShellCommand</span></span><span> </span><span id="local-6989586621679160224"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160224"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160224"><span class="hs-identifier hs-var">cmd</span></a></span><span>
</span><span id="line-163"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">IO.RawCommand</span></span><span> </span><span id="local-6989586621679160225"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160225"><span class="hs-identifier hs-var">cmd</span></a></span></span><span> </span><span id="local-6989586621679160226"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160226"><span class="hs-identifier hs-var">args</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160225"><span class="hs-identifier hs-var">cmd</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">L.unwords</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="Hedgehog.Extras.Internal.Cli.html#argQuote"><span class="hs-identifier hs-var">argQuote</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; [String] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160226"><span class="hs-identifier hs-var">args</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-164"></span><span>    </span><span class="annot"><span class="annottext">IO (ExitCode, String, String) -&gt; m (ExitCode, String, String)
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (ExitCode, String, String) -&gt; m (ExitCode, String, String))
-&gt; IO (ExitCode, String, String) -&gt; m (ExitCode, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess -&gt; String -&gt; IO (ExitCode, String, String)
</span><span class="hs-identifier hs-var">IO.readCreateProcessWithExitCode</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160222"><span class="hs-identifier hs-var">cp</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-165"></span><span>
</span><span id="line-166"></span><span class="annot"><span class="hs-comment">-- | Execute a process, returning '()'.</span></span><span>
</span><span id="line-167"></span><span id="local-6989586621679159931"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#exec_"><span class="hs-identifier hs-type">exec_</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-168"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159931"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159931"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-169"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-170"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-171"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-172"></span><span>    </span><span class="annot"><a href="#local-6989586621679159931"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span></span><span>
</span><span id="line-173"></span><span id="exec_"><span class="annot"><span class="annottext">exec_ :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; [String] -&gt; m ()
</span><a href="Hedgehog.Extras.Test.Process.html#exec_"><span class="hs-identifier hs-var hs-var">exec_</span></a></span></span><span> </span><span id="local-6989586621679160241"><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160241"><span class="hs-identifier hs-var">execConfig</span></a></span></span><span> </span><span id="local-6989586621679160242"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160242"><span class="hs-identifier hs-var">bin</span></a></span></span><span> </span><span id="local-6989586621679160243"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160243"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m String -&gt; m ()
forall (f :: * -&gt; *) a. Functor f =&gt; f a -&gt; f ()
</span><span class="hs-identifier hs-var">void</span></span><span> </span><span class="annot"><span class="annottext">(m String -&gt; m ()) -&gt; m String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">ExecConfig -&gt; String -&gt; [String] -&gt; m String
forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; [String] -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#exec"><span class="hs-identifier hs-var">exec</span></a></span><span> </span><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160241"><span class="hs-identifier hs-var">execConfig</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160242"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160243"><span class="hs-identifier hs-var">arguments</span></a></span><span>
</span><span id="line-174"></span><span>
</span><span id="line-175"></span><span class="annot"><span class="hs-comment">{- | Execute a process, returning the stdout. Fail if the call returns
with a non-zero exit code. For a version that doesn't fail upon receiving
a non-zero exit code, see 'execAny'.
-}</span></span><span>
</span><span id="line-179"></span><span id="local-6989586621679159936"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#exec"><span class="hs-identifier hs-type">exec</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-180"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159936"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159936"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-181"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-182"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-183"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-184"></span><span>    </span><span class="annot"><a href="#local-6989586621679159936"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-185"></span><span id="exec"><span class="annot"><span class="annottext">exec :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; [String] -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#exec"><span class="hs-identifier hs-var hs-var">exec</span></a></span></span><span> </span><span id="local-6989586621679160250"><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160250"><span class="hs-identifier hs-var">execConfig</span></a></span></span><span> </span><span id="local-6989586621679160251"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160251"><span class="hs-identifier hs-var">bin</span></a></span></span><span> </span><span id="local-6989586621679160252"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160252"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m String) -&gt; m String
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m String) -&gt; m String)
-&gt; (HasCallStack =&gt; m String) -&gt; m String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-186"></span><span>    </span><span class="hs-special">(</span><span id="local-6989586621679160270"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160270"><span class="hs-identifier hs-var">exitResult</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160271"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160271"><span class="hs-identifier hs-var">stdout</span></a></span></span><span class="hs-special">,</span><span> </span><span id="local-6989586621679160272"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160272"><span class="hs-identifier hs-var">stderr</span></a></span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">ExecConfig -&gt; String -&gt; [String] -&gt; m (ExitCode, String, String)
forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; [String] -&gt; m (ExitCode, String, String)
</span><a href="Hedgehog.Extras.Test.Process.html#execAny"><span class="hs-identifier hs-var">execAny</span></a></span><span> </span><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160250"><span class="hs-identifier hs-var">execConfig</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160251"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160252"><span class="hs-identifier hs-var">arguments</span></a></span><span>
</span><span id="line-187"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160270"><span class="hs-identifier hs-var">exitResult</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-188"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">IO.ExitFailure</span></span><span> </span><span id="local-6989586621679160273"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679160273"><span class="hs-identifier hs-var">exitCode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-189"></span><span>            </span><span class="annot"><span class="annottext">CallStack -&gt; String -&gt; m String
forall (m :: * -&gt; *) a. MonadTest m =&gt; CallStack -&gt; String -&gt; m a
</span><a href="Hedgehog.Extras.Test.Prim.html#failMessage"><span class="hs-identifier hs-var">H.failMessage</span></a></span><span> </span><span class="annot"><span class="annottext">CallStack
HasCallStack =&gt; CallStack
</span><span class="hs-identifier hs-var">GHC.callStack</span></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m String)
-&gt; ([String] -&gt; String) -&gt; [String] -&gt; m String
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">L.unlines</span></span><span> </span><span class="annot"><span class="annottext">([String] -&gt; m String) -&gt; [String] -&gt; m String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-190"></span><span>                </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Process exited with non-zero exit-code: &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="annot"><span class="annottext">forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="hs-glyph">@</span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679160273"><span class="hs-identifier hs-var">exitCode</span></a></span><span class="hs-special">]</span><span>
</span><span id="line-191"></span><span>                    </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">L.null</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160271"><span class="hs-identifier hs-var">stdout</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9473;&#9473;&#9473;&#9473; stdout &#9473;&#9473;&#9473;&#9473;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160271"><span class="hs-identifier hs-var">stdout</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-192"></span><span>                    </span><span class="annot"><span class="annottext">[String] -&gt; [String] -&gt; [String]
forall a. [a] -&gt; [a] -&gt; [a]
</span><span class="hs-operator hs-var">++</span></span><span> </span><span class="hs-special">(</span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">String -&gt; Bool
forall a. [a] -&gt; Bool
forall (t :: * -&gt; *) a. Foldable t =&gt; t a -&gt; Bool
</span><span class="hs-identifier hs-var">L.null</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160272"><span class="hs-identifier hs-var">stderr</span></a></span><span> </span><span class="hs-keyword">then</span><span> </span><span class="hs-special">[</span><span class="hs-special">]</span><span> </span><span class="hs-keyword">else</span><span> </span><span class="hs-special">[</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9473;&#9473;&#9473;&#9473; stderr &#9473;&#9473;&#9473;&#9473;&quot;</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160272"><span class="hs-identifier hs-var">stderr</span></a></span><span class="hs-special">]</span><span class="hs-special">)</span><span>
</span><span id="line-193"></span><span>        </span><span class="annot"><span class="annottext">ExitCode
</span><span class="hs-identifier hs-var">IO.ExitSuccess</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160271"><span class="hs-identifier hs-var">stdout</span></a></span><span>
</span><span id="line-194"></span><span>
</span><span id="line-195"></span><span class="annot"><span class="hs-comment">-- | Execute a process, returning the error code, the stdout, and the stderr.</span></span><span>
</span><span id="line-196"></span><span id="local-6989586621679159938"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execAny"><span class="hs-identifier hs-type">execAny</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-197"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159938"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159938"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-198"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-199"></span><span>    </span><span class="annot"><span class="hs-comment">-- | The binary to launch</span></span><span>
</span><span id="line-200"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-201"></span><span>    </span><span class="annot"><span class="hs-comment">-- | The binary's arguments</span></span><span>
</span><span id="line-202"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-203"></span><span>    </span><span class="annot"><span class="hs-comment">-- | exit code, stdout, stderr</span></span><span>
</span><span id="line-204"></span><span>    </span><span class="annot"><a href="#local-6989586621679159938"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">ExitCode</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-205"></span><span id="execAny"><span class="annot"><span class="annottext">execAny :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; [String] -&gt; m (ExitCode, String, String)
</span><a href="Hedgehog.Extras.Test.Process.html#execAny"><span class="hs-identifier hs-var hs-var">execAny</span></a></span></span><span> </span><span id="local-6989586621679160280"><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160280"><span class="hs-identifier hs-var">execConfig</span></a></span></span><span> </span><span id="local-6989586621679160281"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160281"><span class="hs-identifier hs-var">bin</span></a></span></span><span> </span><span id="local-6989586621679160282"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160282"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m (ExitCode, String, String))
-&gt; m (ExitCode, String, String)
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m (ExitCode, String, String))
 -&gt; m (ExitCode, String, String))
-&gt; (HasCallStack =&gt; m (ExitCode, String, String))
-&gt; m (ExitCode, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-206"></span><span>    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679160298"><span class="annot"><span class="annottext">cp :: CreateProcess
</span><a href="#local-6989586621679160298"><span class="hs-identifier hs-var hs-var">cp</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-207"></span><span>            </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; CreateProcess
</span><span class="hs-identifier hs-var">IO.proc</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160281"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160282"><span class="hs-identifier hs-var">arguments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-208"></span><span>                </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">IO.env</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-var">getLast</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execConfigEnv"><span class="hs-identifier hs-var">execConfigEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679160280"><span class="hs-identifier hs-type">execConfig</span></a></span><span>
</span><span id="line-209"></span><span>                </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">IO.cwd</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-var">getLast</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execConfigCwd"><span class="hs-identifier hs-var">execConfigCwd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679160280"><span class="hs-identifier hs-type">execConfig</span></a></span><span>
</span><span id="line-210"></span><span>                </span><span class="hs-special">}</span><span>
</span><span id="line-211"></span><span>    </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; ShowS -&gt; String -&gt; m ()
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&#9473;&#9473;&#9473;&#9473; command &#9473;&#9473;&#9473;&#9473;\n&quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span class="hs-special">)</span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160281"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot; &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String] -&gt; String
</span><span class="hs-identifier hs-var">L.unwords</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ShowS
</span><a href="Hedgehog.Extras.Internal.Cli.html#argQuote"><span class="hs-identifier hs-var">argQuote</span></a></span><span> </span><span class="annot"><span class="annottext">ShowS -&gt; [String] -&gt; [String]
forall (f :: * -&gt; *) a b. Functor f =&gt; (a -&gt; b) -&gt; f a -&gt; f b
</span><span class="hs-operator hs-var">&lt;$&gt;</span></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160282"><span class="hs-identifier hs-var">arguments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-212"></span><span>    </span><span class="annot"><span class="annottext">IO (ExitCode, String, String) -&gt; m (ExitCode, String, String)
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (ExitCode, String, String) -&gt; m (ExitCode, String, String))
-&gt; IO (ExitCode, String, String) -&gt; m (ExitCode, String, String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess -&gt; String -&gt; IO (ExitCode, String, String)
</span><span class="hs-identifier hs-var">IO.readCreateProcessWithExitCode</span></span><span> </span><span class="annot"><span class="annottext">CreateProcess
</span><a href="#local-6989586621679160298"><span class="hs-identifier hs-var">cp</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;&quot;</span></span><span>
</span><span id="line-213"></span><span>
</span><span id="line-214"></span><span class="annot"><span class="hs-comment">-- | Wait for process to exit.</span></span><span>
</span><span id="line-215"></span><span id="local-6989586621679159941"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#waitForProcess"><span class="hs-identifier hs-type">waitForProcess</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-216"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159941"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159941"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-217"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ProcessHandle</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-218"></span><span>    </span><span class="annot"><a href="#local-6989586621679159941"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExitCode</span></span></span><span>
</span><span id="line-219"></span><span id="waitForProcess"><span class="annot"><span class="annottext">waitForProcess :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ProcessHandle -&gt; m ExitCode
</span><a href="Hedgehog.Extras.Test.Process.html#waitForProcess"><span class="hs-identifier hs-var hs-var">waitForProcess</span></a></span></span><span> </span><span id="local-6989586621679160307"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160307"><span class="hs-identifier hs-var">hProcess</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-220"></span><span>    </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m ExitCode) -&gt; m ExitCode
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m ExitCode) -&gt; m ExitCode)
-&gt; (HasCallStack =&gt; m ExitCode) -&gt; m ExitCode
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-221"></span><span>        </span><span class="annot"><span class="annottext">IO ExitCode -&gt; m ExitCode
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO ExitCode -&gt; m ExitCode) -&gt; IO ExitCode -&gt; m ExitCode
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-222"></span><span>            </span><span class="annot"><span class="annottext">ProcessHandle -&gt; IO ExitCode
</span><span class="hs-identifier hs-var">IO.waitForProcess</span></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160307"><span class="hs-identifier hs-var">hProcess</span></a></span><span>
</span><span id="line-223"></span><span>
</span><span id="line-224"></span><span class="annot"><span class="hs-comment">-- | Wait for process to exit or return 'Nothing' if interrupted by an asynchronous exception.</span></span><span>
</span><span id="line-225"></span><span id="local-6989586621679159943"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#maybeWaitForProcess"><span class="hs-identifier hs-type">maybeWaitForProcess</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-226"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159943"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159943"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-227"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ProcessHandle</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-228"></span><span>    </span><span class="annot"><a href="#local-6989586621679159943"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Maybe</span></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExitCode</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-229"></span><span id="maybeWaitForProcess"><span class="annot"><span class="annottext">maybeWaitForProcess :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
ProcessHandle -&gt; m (Maybe ExitCode)
</span><a href="Hedgehog.Extras.Test.Process.html#maybeWaitForProcess"><span class="hs-identifier hs-var hs-var">maybeWaitForProcess</span></a></span></span><span> </span><span id="local-6989586621679160319"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160319"><span class="hs-identifier hs-var">hProcess</span></a></span></span><span> </span><span class="hs-glyph">=</span><span>
</span><span id="line-230"></span><span>    </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m (Maybe ExitCode)) -&gt; m (Maybe ExitCode)
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m (Maybe ExitCode)) -&gt; m (Maybe ExitCode))
-&gt; (HasCallStack =&gt; m (Maybe ExitCode)) -&gt; m (Maybe ExitCode)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-231"></span><span>        </span><span class="annot"><span class="annottext">IO (Maybe ExitCode) -&gt; m (Maybe ExitCode)
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe ExitCode) -&gt; m (Maybe ExitCode))
-&gt; IO (Maybe ExitCode) -&gt; m (Maybe ExitCode)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span>
</span><span id="line-232"></span><span>            </span><span class="annot"><span class="annottext">ProcessHandle -&gt; IO (Maybe ExitCode)
</span><a href="Hedgehog.Extras.Stock.IO.Process.html#maybeWaitForProcess"><span class="hs-identifier hs-var">IO.maybeWaitForProcess</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160319"><span class="hs-identifier hs-var">hProcess</span></a></span><span>
</span><span id="line-233"></span><span>
</span><span id="line-234"></span><span class="annot"><span class="hs-comment">-- | Wait a maximum of 'seconds' secons for process to exit.</span></span><span>
</span><span id="line-235"></span><span id="local-6989586621679159945"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#waitSecondsForProcess"><span class="hs-identifier hs-type">waitSecondsForProcess</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-236"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159945"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159945"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-237"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">Int</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-238"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">ProcessHandle</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-239"></span><span>    </span><span class="annot"><a href="#local-6989586621679159945"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">Either</span></span><span> </span><span class="annot"><a href="Hedgehog.Extras.Stock.IO.Process.html#TimedOut"><span class="hs-identifier hs-type">TimedOut</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">ExitCode</span></span><span class="hs-special">)</span></span><span>
</span><span id="line-240"></span><span id="waitSecondsForProcess"><span class="annot"><span class="annottext">waitSecondsForProcess :: forall (m :: * -&gt; *).
(MonadTest m, MonadIO m, HasCallStack) =&gt;
Int -&gt; ProcessHandle -&gt; m (Either TimedOut ExitCode)
</span><a href="Hedgehog.Extras.Test.Process.html#waitSecondsForProcess"><span class="hs-identifier hs-var hs-var">waitSecondsForProcess</span></a></span></span><span> </span><span id="local-6989586621679160332"><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679160332"><span class="hs-identifier hs-var">seconds</span></a></span></span><span> </span><span id="local-6989586621679160333"><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160333"><span class="hs-identifier hs-var">hProcess</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">(HasCallStack =&gt; m (Either TimedOut ExitCode))
-&gt; m (Either TimedOut ExitCode)
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">((HasCallStack =&gt; m (Either TimedOut ExitCode))
 -&gt; m (Either TimedOut ExitCode))
-&gt; (HasCallStack =&gt; m (Either TimedOut ExitCode))
-&gt; m (Either TimedOut ExitCode)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-241"></span><span>    </span><span id="local-6989586621679160358"><span class="annot"><span class="annottext">Either TimedOut (Maybe ExitCode)
</span><a href="#local-6989586621679160358"><span class="hs-identifier hs-var">result</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Either TimedOut (Maybe ExitCode))
-&gt; m (Either TimedOut (Maybe ExitCode))
forall (m :: * -&gt; *) a.
(MonadTest m, MonadIO m, HasCallStack) =&gt;
IO a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalIO"><span class="hs-identifier hs-var">H.evalIO</span></a></span><span> </span><span class="annot"><span class="annottext">(IO (Either TimedOut (Maybe ExitCode))
 -&gt; m (Either TimedOut (Maybe ExitCode)))
-&gt; IO (Either TimedOut (Maybe ExitCode))
-&gt; m (Either TimedOut (Maybe ExitCode))
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">Int -&gt; ProcessHandle -&gt; IO (Either TimedOut (Maybe ExitCode))
</span><a href="Hedgehog.Extras.Stock.IO.Process.html#waitSecondsForProcess"><span class="hs-identifier hs-var">IO.waitSecondsForProcess</span></a></span><span> </span><span class="annot"><span class="annottext">Int
</span><a href="#local-6989586621679160332"><span class="hs-identifier hs-var">seconds</span></a></span><span> </span><span class="annot"><span class="annottext">ProcessHandle
</span><a href="#local-6989586621679160333"><span class="hs-identifier hs-var">hProcess</span></a></span><span>
</span><span id="line-242"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Either TimedOut (Maybe ExitCode)
</span><a href="#local-6989586621679160358"><span class="hs-identifier hs-var">result</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-243"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Left</span></span><span> </span><span class="annot"><span class="annottext">TimedOut
</span><a href="Hedgehog.Extras.Stock.IO.Process.html#TimedOut"><span class="hs-identifier hs-var">TimedOut</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-244"></span><span>            </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Timed out waiting for process to exit&quot;</span></span><span>
</span><span id="line-245"></span><span>            </span><span class="annot"><span class="annottext">Either TimedOut ExitCode -&gt; m (Either TimedOut ExitCode)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">TimedOut -&gt; Either TimedOut ExitCode
forall a b. a -&gt; Either a b
</span><span class="hs-identifier hs-var">Left</span></span><span> </span><span class="annot"><span class="annottext">TimedOut
</span><a href="Hedgehog.Extras.Stock.IO.Process.html#TimedOut"><span class="hs-identifier hs-var">TimedOut</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-246"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Right</span></span><span> </span><span id="local-6989586621679160361"><span class="annot"><span class="annottext">Maybe ExitCode
</span><a href="#local-6989586621679160361"><span class="hs-identifier hs-var">maybeExitCode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-247"></span><span>            </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe ExitCode
</span><a href="#local-6989586621679160361"><span class="hs-identifier hs-var">maybeExitCode</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-248"></span><span>                </span><span class="annot"><span class="annottext">Maybe ExitCode
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">CallStack -&gt; String -&gt; m (Either TimedOut ExitCode)
forall (m :: * -&gt; *) a. MonadTest m =&gt; CallStack -&gt; String -&gt; m a
</span><a href="Hedgehog.Extras.Test.Prim.html#failMessage"><span class="hs-identifier hs-var">H.failMessage</span></a></span><span> </span><span class="annot"><span class="annottext">CallStack
HasCallStack =&gt; CallStack
</span><span class="hs-identifier hs-var">GHC.callStack</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;No exit code for process&quot;</span></span><span>
</span><span id="line-249"></span><span>                </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679160362"><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160362"><span class="hs-identifier hs-var">exitCode</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-250"></span><span>                    </span><span class="annot"><span class="annottext">String -&gt; m ()
forall (m :: * -&gt; *). (MonadTest m, HasCallStack) =&gt; String -&gt; m ()
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#annotate"><span class="hs-identifier hs-var">H.annotate</span></a></span><span> </span><span class="annot"><span class="annottext">(String -&gt; m ()) -&gt; String -&gt; m ()
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Process exited &quot;</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
forall a. Semigroup a =&gt; a -&gt; a -&gt; a
</span><span class="hs-operator hs-var">&lt;&gt;</span></span><span> </span><span class="annot"><span class="annottext">ExitCode -&gt; String
forall a. Show a =&gt; a -&gt; String
</span><span class="hs-identifier hs-var">show</span></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160362"><span class="hs-identifier hs-var">exitCode</span></a></span><span>
</span><span id="line-251"></span><span>                    </span><span class="annot"><span class="annottext">Either TimedOut ExitCode -&gt; m (Either TimedOut ExitCode)
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">ExitCode -&gt; Either TimedOut ExitCode
forall a b. b -&gt; Either a b
</span><span class="hs-identifier hs-var">Right</span></span><span> </span><span class="annot"><span class="annottext">ExitCode
</span><a href="#local-6989586621679160362"><span class="hs-identifier hs-var">exitCode</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-252"></span><span>
</span><span id="line-253"></span><span class="annot"><span class="hs-comment">-- | Compute the path to the binary given a package name or an environment variable override.</span></span><span>
</span><span id="line-254"></span><span id="local-6989586621679159950"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#binFlex"><span class="hs-identifier hs-type">binFlex</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-255"></span><span>    </span><span class="hs-special">(</span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">,</span><span> </span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159950"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159950"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-256"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Package name</span></span><span>
</span><span id="line-257"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-258"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Environment variable pointing to the binary to run</span></span><span>
</span><span id="line-259"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-260"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Path to executable</span></span><span>
</span><span id="line-261"></span><span>    </span><span class="annot"><a href="#local-6989586621679159950"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">FilePath</span></span></span><span>
</span><span id="line-262"></span><span id="binFlex"><span class="annot"><span class="annottext">binFlex :: forall (m :: * -&gt; *).
(HasCallStack, MonadTest m, MonadIO m) =&gt;
String -&gt; String -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#binFlex"><span class="hs-identifier hs-var hs-var">binFlex</span></a></span></span><span> </span><span id="local-6989586621679160373"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160373"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679160374"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160374"><span class="hs-identifier hs-var">binaryEnv</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-263"></span><span>    </span><span id="local-6989586621679160375"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679160375"><span class="hs-identifier hs-var">maybeEnvBin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe String) -&gt; m (Maybe String)
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe String) -&gt; m (Maybe String))
-&gt; IO (Maybe String) -&gt; m (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Maybe String)
</span><span class="hs-identifier hs-var">IO.lookupEnv</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160374"><span class="hs-identifier hs-var">binaryEnv</span></a></span><span>
</span><span id="line-264"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679160375"><span class="hs-identifier hs-var">maybeEnvBin</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-265"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679160377"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160377"><span class="hs-identifier hs-var">envBin</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160377"><span class="hs-identifier hs-var">envBin</span></a></span><span>
</span><span id="line-266"></span><span>        </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; m String
forall (m :: * -&gt; *).
(HasCallStack, MonadIO m) =&gt;
String -&gt; String -&gt; m String
</span><a href="Hedgehog.Extras.Internal.Process.html#binDist"><span class="hs-identifier hs-var">Internal.binDist</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160373"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160374"><span class="hs-identifier hs-var">binaryEnv</span></a></span><span>
</span><span id="line-267"></span><span>
</span><span id="line-268"></span><span class="annot"><span class="hs-comment">{- | Create a 'CreateProcess' describing how to start a process given the Cabal package name
corresponding to the executable, an environment variable pointing to the executable,
and an argument list.

The actual executable used will the one specified by the environment variable, but if
the environment variable is not defined, it will be found instead by consulting the
&quot;plan.json&quot; generated by cabal.  It is assumed that the project has already been
configured and the executable has been built.
-}</span></span><span>
</span><span id="line-277"></span><span id="local-6989586621679159955"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#procFlex"><span class="hs-identifier hs-type">procFlex</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-278"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159955"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621679159955"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159955"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-279"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Cabal package name corresponding to the executable</span></span><span>
</span><span id="line-280"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-281"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Environment variable pointing to the binary to run</span></span><span>
</span><span id="line-282"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-283"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Arguments to the CLI command</span></span><span>
</span><span id="line-284"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-285"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Captured stdout</span></span><span>
</span><span id="line-286"></span><span>    </span><span class="annot"><a href="#local-6989586621679159955"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CreateProcess</span></span></span><span>
</span><span id="line-287"></span><span id="procFlex"><span class="annot"><span class="annottext">procFlex :: forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
String -&gt; String -&gt; [String] -&gt; m CreateProcess
</span><a href="Hedgehog.Extras.Test.Process.html#procFlex"><span class="hs-identifier hs-var hs-var">procFlex</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m CreateProcess
forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m CreateProcess
</span><a href="Hedgehog.Extras.Test.Process.html#procFlex%27"><span class="hs-identifier hs-var">procFlex'</span></a></span><span> </span><span class="annot"><span class="annottext">ExecConfig
</span><a href="Hedgehog.Extras.Test.Process.html#defaultExecConfig"><span class="hs-identifier hs-var">defaultExecConfig</span></a></span><span>
</span><span id="line-288"></span><span>
</span><span id="line-289"></span><span id="local-6989586621679159927"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#procFlex%27"><span class="hs-identifier hs-type">procFlex'</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-290"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159927"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadCatch</span></span><span> </span><span class="annot"><a href="#local-6989586621679159927"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159927"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">HasCallStack</span></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-291"></span><span>    </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#ExecConfig"><span class="hs-identifier hs-type">ExecConfig</span></a></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-292"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Cabal package name corresponding to the executable</span></span><span>
</span><span id="line-293"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-294"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Environment variable pointing to the binary to run</span></span><span>
</span><span id="line-295"></span><span>    </span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-296"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Arguments to the CLI command</span></span><span>
</span><span id="line-297"></span><span>    </span><span class="hs-special">[</span><span class="annot"><span class="hs-identifier hs-type">String</span></span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span>
</span><span id="line-298"></span><span>    </span><span class="annot"><span class="hs-comment">-- | Captured stdout</span></span><span>
</span><span id="line-299"></span><span>    </span><span class="annot"><a href="#local-6989586621679159927"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">CreateProcess</span></span></span><span>
</span><span id="line-300"></span><span id="procFlex%27"><span class="annot"><span class="annottext">procFlex' :: forall (m :: * -&gt; *).
(MonadTest m, MonadCatch m, MonadIO m, HasCallStack) =&gt;
ExecConfig -&gt; String -&gt; String -&gt; [String] -&gt; m CreateProcess
</span><a href="Hedgehog.Extras.Test.Process.html#procFlex%27"><span class="hs-identifier hs-var hs-var">procFlex'</span></a></span></span><span> </span><span id="local-6989586621679160405"><span class="annot"><span class="annottext">ExecConfig
</span><a href="#local-6989586621679160405"><span class="hs-identifier hs-var">execConfig</span></a></span></span><span> </span><span id="local-6989586621679160406"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160406"><span class="hs-identifier hs-var">pkg</span></a></span></span><span> </span><span id="local-6989586621679160407"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160407"><span class="hs-identifier hs-var">binaryEnv</span></a></span></span><span> </span><span id="local-6989586621679160408"><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160408"><span class="hs-identifier hs-var">arguments</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">m CreateProcess -&gt; m CreateProcess
(HasCallStack =&gt; m CreateProcess) -&gt; m CreateProcess
forall a. HasCallStack =&gt; (HasCallStack =&gt; a) -&gt; a
</span><span class="hs-identifier hs-var">GHC.withFrozenCallStack</span></span><span> </span><span class="annot"><span class="annottext">(m CreateProcess -&gt; m CreateProcess)
-&gt; (m CreateProcess -&gt; m CreateProcess)
-&gt; m CreateProcess
-&gt; m CreateProcess
forall b c a. (b -&gt; c) -&gt; (a -&gt; b) -&gt; a -&gt; c
</span><span class="hs-operator hs-var">.</span></span><span> </span><span class="annot"><span class="annottext">m CreateProcess -&gt; m CreateProcess
forall (m :: * -&gt; *) a.
(MonadTest m, MonadCatch m, HasCallStack) =&gt;
m a -&gt; m a
</span><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#evalM"><span class="hs-identifier hs-var">H.evalM</span></a></span><span> </span><span class="annot"><span class="annottext">(m CreateProcess -&gt; m CreateProcess)
-&gt; m CreateProcess -&gt; m CreateProcess
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-301"></span><span>    </span><span id="local-6989586621679160411"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160411"><span class="hs-identifier hs-var">bin</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">String -&gt; String -&gt; m String
forall (m :: * -&gt; *).
(HasCallStack, MonadTest m, MonadIO m) =&gt;
String -&gt; String -&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#binFlex"><span class="hs-identifier hs-var">binFlex</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160406"><span class="hs-identifier hs-var">pkg</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160407"><span class="hs-identifier hs-var">binaryEnv</span></a></span><span>
</span><span id="line-302"></span><span>    </span><span class="annot"><span class="annottext">CreateProcess -&gt; m CreateProcess
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span>
</span><span id="line-303"></span><span>        </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String -&gt; [String] -&gt; CreateProcess
</span><span class="hs-identifier hs-var">IO.proc</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160411"><span class="hs-identifier hs-var">bin</span></a></span><span> </span><span class="annot"><span class="annottext">[String]
</span><a href="#local-6989586621679160408"><span class="hs-identifier hs-var">arguments</span></a></span><span class="hs-special">)</span><span>
</span><span id="line-304"></span><span>            </span><span class="hs-special">{</span><span> </span><span class="annot"><span class="hs-identifier hs-var">IO.env</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-var">getLast</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execConfigEnv"><span class="hs-identifier hs-var">execConfigEnv</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679160405"><span class="hs-identifier hs-type">execConfig</span></a></span><span>
</span><span id="line-305"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-var">IO.cwd</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-var">getLast</span></span><span> </span><span class="annot"><span class="hs-operator hs-type">$</span></span><span> </span><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#execConfigCwd"><span class="hs-identifier hs-var">execConfigCwd</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679160405"><span class="hs-identifier hs-type">execConfig</span></a></span><span>
</span><span id="line-306"></span><span>            </span><span class="hs-special">,</span><span> </span><span class="hs-comment">-- this allows sending signals to the created processes, without killing the test-suite process</span><span>
</span><span id="line-307"></span><span>              </span><span class="annot"><span class="hs-identifier hs-var">IO.create_group</span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="hs-identifier hs-type">True</span></span><span>
</span><span id="line-308"></span><span>            </span><span class="hs-special">}</span><span>
</span><span id="line-309"></span><span>
</span><span id="line-310"></span><span class="annot"><span class="hs-comment">{- | Compute the project base.  This will be based on either the &quot;CARDANO_NODE_SRC&quot;
environment variable or the first parent directory that contains the `cabal.project`.
Both should point to the root directory of the Github project checkout.
-}</span></span><span>
</span><span id="line-314"></span><span id="local-6989586621679159960"><span class="annot"><a href="Hedgehog.Extras.Test.Process.html#getProjectBase"><span class="hs-identifier hs-type">getProjectBase</span></a></span><span> </span><span class="hs-glyph">::</span><span>
</span><span id="line-315"></span><span>    </span><span class="hs-special">(</span><span class="annot"><a href="file:///home/runner/.local/state/cabal/store/ghc-9.6.7/hedgehog-1.7-353581d3d7fa57cf9fa9d05f9937ea4cf103ea68e3e6bde33efdc18a0f486e33/share/doc/html/src/Hedgehog.Internal.Property.html#MonadTest"><span class="hs-identifier hs-type">MonadTest</span></a></span><span> </span><span class="annot"><a href="#local-6989586621679159960"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">,</span><span> </span><span class="annot"><span class="hs-identifier hs-type">MonadIO</span></span><span> </span><span class="annot"><a href="#local-6989586621679159960"><span class="hs-identifier hs-type">m</span></a></span><span class="hs-special">)</span><span> </span><span class="hs-glyph">=&gt;</span><span>
</span><span id="line-316"></span><span>    </span><span class="annot"><a href="#local-6989586621679159960"><span class="hs-identifier hs-type">m</span></a></span><span> </span><span class="annot"><span class="hs-identifier hs-type">String</span></span></span><span>
</span><span id="line-317"></span><span id="getProjectBase"><span class="annot"><span class="annottext">getProjectBase :: forall (m :: * -&gt; *). (MonadTest m, MonadIO m) =&gt; m String
</span><a href="Hedgehog.Extras.Test.Process.html#getProjectBase"><span class="hs-identifier hs-var hs-var">getProjectBase</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-318"></span><span>    </span><span class="hs-keyword">let</span><span>
</span><span id="line-319"></span><span>        </span><span id="local-6989586621679160438"><span class="annot"><span class="annottext">findUp :: String -&gt; m String
</span><a href="#local-6989586621679160438"><span class="hs-identifier hs-var hs-var">findUp</span></a></span></span><span> </span><span id="local-6989586621679160439"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160439"><span class="hs-identifier hs-var">dir</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-320"></span><span>            </span><span id="local-6989586621679160440"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679160440"><span class="hs-identifier hs-var">atBase</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; m Bool
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; m Bool) -&gt; IO Bool -&gt; m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><span class="hs-identifier hs-var">IO.doesFileExist</span></span><span> </span><span class="hs-special">(</span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160439"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;cabal.project&quot;</span></span><span class="hs-special">)</span><span>
</span><span id="line-321"></span><span>            </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679160440"><span class="hs-identifier hs-var">atBase</span></a></span><span>
</span><span id="line-322"></span><span>                </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160439"><span class="hs-identifier hs-var">dir</span></a></span><span>
</span><span id="line-323"></span><span>                </span><span class="hs-keyword">else</span><span> </span><span class="hs-keyword">do</span><span>
</span><span id="line-324"></span><span>                    </span><span class="hs-keyword">let</span><span> </span><span id="local-6989586621679160442"><span class="annot"><span class="annottext">up :: String
</span><a href="#local-6989586621679160442"><span class="hs-identifier hs-var hs-var">up</span></a></span></span><span> </span><span class="hs-glyph">=</span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160439"><span class="hs-identifier hs-var">dir</span></a></span><span> </span><span class="annot"><span class="annottext">String -&gt; ShowS
</span><span class="hs-operator hs-var">&lt;/&gt;</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;..&quot;</span></span><span>
</span><span id="line-325"></span><span>                    </span><span id="local-6989586621679160443"><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679160443"><span class="hs-identifier hs-var">upExist</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO Bool -&gt; m Bool
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO Bool -&gt; m Bool) -&gt; IO Bool -&gt; m Bool
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO Bool
</span><span class="hs-identifier hs-var">IO.doesDirectoryExist</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160442"><span class="hs-identifier hs-var">up</span></a></span><span>
</span><span id="line-326"></span><span>                    </span><span class="hs-keyword">if</span><span> </span><span class="annot"><span class="annottext">Bool
</span><a href="#local-6989586621679160443"><span class="hs-identifier hs-var">upExist</span></a></span><span>
</span><span id="line-327"></span><span>                        </span><span class="hs-keyword">then</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
</span><a href="#local-6989586621679160438"><span class="hs-identifier hs-var">findUp</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160442"><span class="hs-identifier hs-var">up</span></a></span><span>
</span><span id="line-328"></span><span>                        </span><span class="hs-keyword">else</span><span> </span><span class="annot"><span class="annottext">IO String -&gt; m String
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO String -&gt; m String) -&gt; IO String -&gt; m String
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO String
forall a. String -&gt; IO a
forall (m :: * -&gt; *) a. MonadFail m =&gt; String -&gt; m a
</span><span class="hs-identifier hs-var">fail</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;Could not detect project base directory (containing cabal.project)&quot;</span></span><span>
</span><span id="line-329"></span><span>    </span><span id="local-6989586621679160445"><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679160445"><span class="hs-identifier hs-var">maybeNodeSrc</span></a></span></span><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="annot"><span class="annottext">IO (Maybe String) -&gt; m (Maybe String)
forall a. IO a -&gt; m a
forall (m :: * -&gt; *) a. MonadIO m =&gt; IO a -&gt; m a
</span><span class="hs-identifier hs-var">liftIO</span></span><span> </span><span class="annot"><span class="annottext">(IO (Maybe String) -&gt; m (Maybe String))
-&gt; IO (Maybe String) -&gt; m (Maybe String)
forall a b. (a -&gt; b) -&gt; a -&gt; b
</span><span class="hs-operator hs-var">$</span></span><span> </span><span class="annot"><span class="annottext">String -&gt; IO (Maybe String)
</span><span class="hs-identifier hs-var">IO.lookupEnv</span></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;CARDANO_NODE_SRC&quot;</span></span><span>
</span><span id="line-330"></span><span>    </span><span class="hs-keyword">case</span><span> </span><span class="annot"><span class="annottext">Maybe String
</span><a href="#local-6989586621679160445"><span class="hs-identifier hs-var">maybeNodeSrc</span></a></span><span> </span><span class="hs-keyword">of</span><span>
</span><span id="line-331"></span><span>        </span><span class="annot"><span class="hs-identifier hs-type">Just</span></span><span> </span><span id="local-6989586621679160446"><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160446"><span class="hs-identifier hs-var">path</span></a></span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall a. a -&gt; m a
forall (m :: * -&gt; *) a. Monad m =&gt; a -&gt; m a
</span><span class="hs-identifier hs-var">return</span></span><span> </span><span class="annot"><span class="annottext">String
</span><a href="#local-6989586621679160446"><span class="hs-identifier hs-var">path</span></a></span><span>
</span><span id="line-332"></span><span>        </span><span class="annot"><span class="annottext">Maybe String
</span><span class="hs-identifier hs-var">Nothing</span></span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="annot"><span class="annottext">String -&gt; m String
forall {m :: * -&gt; *}. MonadIO m =&gt; String -&gt; m String
</span><a href="#local-6989586621679160438"><span class="hs-identifier hs-var">findUp</span></a></span><span> </span><span class="annot"><span class="annottext">String
</span><span class="hs-string">&quot;.&quot;</span></span><span>
</span><span id="line-333"></span></pre></body></html>